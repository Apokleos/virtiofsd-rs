workflow:
  rules:
    - if: $CI_MERGE_REQUEST_ID            # Execute jobs in merge request context
    - if: $CI_COMMIT_BRANCH == 'main'     # Execute jobs when a new commit is pushed to main branch

image: "rust:latest"

clippy:
  before_script:
    - rustup component add clippy
  script:
    - cargo clippy --verbose

test:cargo:
  script:
    - rustc --version && cargo --version  # Print version info for debugging
    - cargo build --verbose
    - cargo test
